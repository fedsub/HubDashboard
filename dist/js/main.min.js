let dataAddress;function deleteData(e){return fetch("http://167.99.222.47:8000/api/shipments/"+e,{method:"delete"}).then(setTimeout(location.reload.bind(location),500))}console.log("iets randoms"),fetch("http://167.99.222.47:8000/api/shipments").then(e=>e.json()).then(function(e){dataAddress=e;let t=document.getElementById("packageList");if(t){let e=t.createTHead().insertRow(0),n=e.insertCell(0),o=e.insertCell(1),s=e.insertCell(2),a=e.insertCell(3),r=e.insertCell(4),l=e.insertCell(5),d=e.insertCell(6);for(n.addEventListener("click",function(){sortTable(0)}),o.addEventListener("click",function(){sortTable(1)}),s.addEventListener("click",function(){sortTable(2)}),n.innerHTML="<b class = dropdown>Naam</b><i class='tiny center material-icons dropdown'>arrow_drop_down</i>",o.innerHTML="<b class = dropdown>Adres</b><i class='tiny center material-icons dropdown'>arrow_drop_down</i>",s.innerHTML="<b class = dropdown>Postcode</b><i class='tiny center material-icons dropdown'>arrow_drop_down</i>",a.innerHTML="<b>Telefoonnummer</b>",r.innerHTML="<b>ID</b>",l.innerHTML="<b>Aanpassen</b>",d.innerHTML="<b>Verwijderen</b>",i=0;i<dataAddress.length;i++){let e=t.insertRow(1);e.insertCell(0).innerHTML=dataAddress[i].name,e.insertCell(1).innerHTML=dataAddress[i].address,e.insertCell(2).innerHTML=dataAddress[i].zip,e.insertCell(3).innerHTML=dataAddress[i].phone,e.insertCell(4).innerHTML=dataAddress[i]._id;let n=dataAddress[i]._id;e.insertCell(5).innerHTML="link (volgt nog)",e.insertCell(6).innerHTML="<button id="+i+">Verwijderen</button>",document.getElementById(i).addEventListener("click",()=>{deleteData(n)})}}}).catch(e=>console.error(e));const API_KEY="5a4f6201-53d3-419c-920f-7970a6c183e9\t";url="https://graphhopper.com/api/1/vrp/optimize?key="+API_KEY;let JOB_ID="";async function getJobID(){let e=(await fetch("http://milansosef.nl/post.php").then(e=>e.json())).job_id;return console.log("JOBID",e),e}async function getSolution(){let e=await getJobID();console.log("JOBID",e),checkResponse(e)}async function checkResponse(e){let t=await fetch("https://graphhopper.com/api/1/vrp/solution/"+e+"?key="+API_KEY).then(e=>e.json());if("processing"==t.status)console.log(t.status),setTimeout(checkResponse(e),500);else{let e=t.solution.routes[0].activities;console.log("DATAGRAPH",e);let n="https://www.google.com/maps/embed/v1/directions?key=AIzaSyB6I4m0PabqJB2oAEJoatzYbNpnsUFhJsY&origin=Blaak&destination=Blaak&waypoints=";for(let t of e){let e=t.address.location_id.replace(" ","%20");console.log(e),n+=e+"|"}n+="&mode=bicycling",mapslinkTrue=n.replace("|&","&"),console.log(mapslinkTrue),document.querySelector("iframe").setAttribute("src",mapslinkTrue)}}let button=document.getElementById("getJobButton");function showMap(){document.getElementById("loader").style.display="none"}button&&(button.addEventListener("click",getSolution),button.addEventListener("click",showMap));let dataHub,packageZip=3011;function doSomething(){let e=new XMLHttpRequest;e.open("POST","http://167.99.222.47:8000/api/shipments",!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status)JSON.parse(e.responseText)};var t=JSON.stringify({name:fullname.value,address:address.value,zip:zipcode.value,zipNumbers:zipcode.value.replace(/\D/g,""),phone:phone.value});return e.send(t),alert("The package has been added, the route is optimized"),location.reload(),!1}function sortTable(e){var t,n,o,s,a,i,r,l,d=0;for(t=document.getElementById("packageList"),o=!0,l="asc";o;){for(o=!1,n=t.getElementsByTagName("TR"),s=1;s<n.length-1;s++)if(r=!1,a=n[s].getElementsByTagName("TD")[e],i=n[s+1].getElementsByTagName("TD")[e],"asc"==l){if(a.innerHTML.toLowerCase()>i.innerHTML.toLowerCase()){r=!0;break}}else if("desc"==l&&a.innerHTML.toLowerCase()<i.innerHTML.toLowerCase()){r=!0;break}r?(n[s].parentNode.insertBefore(n[s+1],n[s]),o=!0,d++):0==d&&"asc"==l&&(l="desc",o=!0)}}fetch("https://bridge.buddyweb.fr/api/metrohubs/metrohaltes/"+packageZip).then(e=>e.json()).then(function(e){console.log(e),dataHub=e}).catch(e=>console.error(e)),$(document).ready(function(){$(".sidenav").sidenav(),$(".collapsible").collapsible()});