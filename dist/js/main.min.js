let dataAddress;fetch("http://167.99.222.47:8000/api/shipments").then(e=>e.json()).then(function(e){dataAddress=e;let t=document.getElementById("packageList"),n=t.createTHead().insertRow(0),s=n.insertCell(0),a=n.insertCell(1),o=n.insertCell(2),r=n.insertCell(3),l=n.insertCell(4),c=n.insertCell(5),d=n.insertCell(6);for(s.addEventListener("click",function(){sortTable(0)}),a.addEventListener("click",function(){sortTable(1)}),o.addEventListener("click",function(){sortTable(2)}),s.innerHTML="<b>Naam</b><i class='tiny center material-icons'>sort_by_alpha</i>",a.innerHTML="<b>Adres</b><i class='tiny center material-icons'>sort_by_alpha</i>",o.innerHTML="<b>Postcode</b><i class='tiny center material-icons'>sort_by_alpha</i>",r.innerHTML="<b>Telefoonnummer</b>",l.innerHTML="<b>ID</b>",c.innerHTML="<b>Aanpassen</b>",d.innerHTML="<b>Verwijderen</b>",i=0;i<dataAddress.length;i++){let e=t.insertRow(1);e.insertCell(0).innerHTML=dataAddress[i].name,e.insertCell(1).innerHTML=dataAddress[i].address,e.insertCell(2).innerHTML=dataAddress[i].zip,e.insertCell(3).innerHTML=dataAddress[i].phone,e.insertCell(4).innerHTML=dataAddress[i]._id,e.insertCell(5).innerHTML="link (volgt nog)",e.insertCell(6).innerHTML="link (volgt nog)"}}).catch(e=>console.error(e));const API_KEY="5a4f6201-53d3-419c-920f-7970a6c183e9\t";async function getShipments(){return await fetch("http://167.99.222.47:8000/api/shipments").then(e=>e.json())}async function postProblem(){let e=await getShipments();console.log(e);let t={method:"POST",body:e,headers:new Headers({})};fetch("http://milansosef.nl/post.php",t).then(e=>e.json()).then(function(e){console.log(e)}).catch(e=>console.log(e))}async function getJobID(){return(await fetch("http://milansosef.nl/post.php").then(e=>e.json())).job_id}async function getSolution(){let e=await getJobID();console.log(e),console.log(checkResponse(e))}async function checkResponse(e){let t=await fetch("https://graphhopper.com/api/1/vrp/solution/"+e+"?key="+API_KEY).then(e=>e.json());if("processing"!=t.status){return t}console.log(t.status),setTimeout(getSolution,500)}url="https://graphhopper.com/api/1/vrp/optimize?key="+API_KEY,postProblem(),document.getElementById("getJobButton").addEventListener("click",getSolution);let dataHub,packageZip=3011;fetch("https://bridge.buddyweb.fr/api/metrohubs/metrohaltes/"+packageZip).then(e=>e.json()).then(function(e){console.log(e),dataHub=e}).catch(e=>console.error(e));var mapslink="https://www.google.com/maps/embed/v1/directions?key=AIzaSyB6I4m0PabqJB2oAEJoatzYbNpnsUFhJsY&origin=Oslo+Norway&destination=Telemark+Norway";const mapsFrame=document.querySelector("iframe");function doSomething(){let e=new XMLHttpRequest;e.open("POST","http://167.99.222.47:8000/api/shipments",!0),e.setRequestHeader("Content-Type","application/json"),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status)JSON.parse(e.responseText)};var t=JSON.stringify({name:fullname.value,address:address.value,zip:zipcode.value,zipNumbers:zipcode.value.replace(/\D/g,""),phone:phone.value});return e.send(t),!1}function sortTable(e){var t,n,s,a,o,i,r,l,c=0;for(t=document.getElementById("packageList"),s=!0,l="asc";s;){for(s=!1,n=t.getElementsByTagName("TR"),a=1;a<n.length-1;a++)if(r=!1,o=n[a].getElementsByTagName("TD")[e],i=n[a+1].getElementsByTagName("TD")[e],"asc"==l){if(o.innerHTML.toLowerCase()>i.innerHTML.toLowerCase()){r=!0;break}}else if("desc"==l&&o.innerHTML.toLowerCase()<i.innerHTML.toLowerCase()){r=!0;break}r?(n[a].parentNode.insertBefore(n[a+1],n[a]),s=!0,c++):0==c&&"asc"==l&&(l="desc",s=!0)}}mapsFrame.setAttribute("src",mapslink);